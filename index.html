<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>GoWhisper</title>
    <link rel="stylesheet" href="https://cdn.rawgit.com/Chalarangelo/mini.css/v2.3.7/dist/mini-default.min.css">
    <style>
        .success {
            background-color: MediumSeaGreen
        }

        .error {
            text-decoration: line-through;
        }

        a.no-decoration {
            text-decoration: none;
        }
    </style>
</head>

<body>
    <header class="sticky">
        <a href="#" class="logo">GoWhisper</a>
        <span>Status page of co0p services</span>
        <a href="?refresh=false" id="refreshEnableLink" class="button visible">refresh OFF</a>
        <a href="?refresh=true" id="refreshDisableLink" class="button">refresh ON</a>
    </header>

    <main class="container">
        <div class="col-sm-offset-2">
            <div class="row">

                {{range .Entries}}

                <a class="card {{if .Online}} success {{else}} error {{end}} no-decoration" target="_blank" href="{{.URL}}">
                    <div class="section">
                        <center>
                            <h3>{{.Label}}</h3>
                        </center>
                    </div>
                </a>
                {{end}}
            </div>
        </div>

    </main>

    <script>
        var params = (new URL(document.location)).searchParams;
        var refresh = params.get("refresh");
        var el = null;

        if (refresh == 'true') {
            el = document.getElementById('refreshDisableLink');
            el.classList.toggle('hidden');
        } else {
            el = document.getElementById('refreshEnableLink');
            el.classList.toggle('hidden');
        }
        setTimeout(function () {
            if (refresh == 'true') {
                window.location.reload();
            }
        }, 3000);

    </script>
</body>

</html>